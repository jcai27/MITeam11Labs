# Virtual Courtroom Simulation

An immersive web application that simulates a Zoom-style courtroom hearing with three AI-powered participants: Judge, Defense Attorney, and Jury. Each participant speaks with unique ElevenLabs voices and can follow scripted scenarios or generate dynamic AI-driven dialogue.

## Features

- **Zoom-Style Interface**: Three video tiles with speaking indicators and real-time captions
- **ElevenLabs Voice Integration**: Each participant uses a distinct voice profile for realistic audio
- **Dual Dialogue Modes**:
  - **Scripted Mode**: Pre-written courtroom scenarios with perfect synchronization
  - **AI Mode**: Dynamic dialogue generated by OpenAI based on role personas
- **Multiple Scenarios**: Opening Statements, Objection Handling, and Verdict Discussion
- **Interactive Controls**: Start, pause, resume, and stop simulations at any time
- **Supabase Backend**: Stores scenarios, participants, and dialogue scripts

## Tech Stack

- **Frontend**: React 18 + TypeScript + Vite
- **Styling**: Tailwind CSS
- **Database**: Supabase (PostgreSQL)
- **Voice Synthesis**: ElevenLabs API
- **AI Dialogue**: OpenAI GPT-4
- **Audio**: Web Audio API

## Setup Instructions

### 1. Install Dependencies

```bash
npm install
```

### 2. Configure API Keys

Update the `.env` file with your API keys:

```env
VITE_SUPABASE_URL=your_supabase_url
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key
VITE_ELEVENLABS_API_KEY=your_elevenlabs_api_key
VITE_OPENAI_API_KEY=your_openai_api_key
```

**Getting API Keys:**

- **Supabase**: Already configured in this project
- **ElevenLabs**: Sign up at [elevenlabs.io](https://elevenlabs.io) and get your API key from the profile section
- **OpenAI**: Get your API key from [platform.openai.com](https://platform.openai.com/api-keys)

### 3. Run the Development Server

The application starts automatically. Visit the preview URL to see it in action.

## How It Works

### Participants

The simulation features three courtroom roles:

1. **Judge** - Authoritative, presides over proceedings
2. **Defense Attorney** - Logical, persuasive advocate
3. **Jury Foreperson** - Neutral, evaluative observer

### Dialogue Modes

**Scripted Mode:**
- Reads from pre-written scenarios stored in Supabase
- Each line is converted to speech using ElevenLabs
- Perfect for consistent demonstrations

**AI Mode:**
- Each participant generates dialogue using OpenAI
- Role-specific personas guide the conversation
- More dynamic and varied interactions

### Available Scenarios

1. **Opening Statements** - Court session begins with initial statements
2. **Objection Handling** - Defense raises an objection, judge rules
3. **Verdict Discussion** - Jury announces verdict, court adjourns

## Project Structure

```
src/
├── components/          # React components
│   ├── ParticipantTile.tsx   # Individual video tile
│   ├── VideoGrid.tsx         # Grid layout
│   └── ControlPanel.tsx      # Simulation controls
├── services/           # External services
│   ├── elevenlabs.ts        # TTS integration
│   ├── openai.ts            # AI dialogue
│   └── DialogueController.ts # Turn-taking logic
├── types/              # TypeScript definitions
├── lib/                # Utilities
│   └── supabase.ts          # Database client
└── App.tsx             # Main application

## Database Schema

**participants** - Courtroom role configurations
**scenarios** - Courtroom scene definitions
**dialogue_lines** - Scripted dialogue content

## Customization

### Adding New Scenarios

Add new scenarios directly in the Supabase dashboard or through SQL:

```sql
INSERT INTO scenarios (name, description)
VALUES ('Your Scenario', 'Description here');

INSERT INTO dialogue_lines (scenario_id, participant_role, text, order_index)
VALUES ('scenario_id', 'judge', 'Your dialogue', 0);
```

### Changing Voice IDs

Update participant voice IDs in the database to use different ElevenLabs voices.

## Notes

- **Mock Audio**: If API keys are not configured, the app generates simple tone audio as a fallback
- **Browser Compatibility**: Requires modern browsers with Web Audio API support
- **Performance**: Audio synthesis happens in real-time, internet connection required
